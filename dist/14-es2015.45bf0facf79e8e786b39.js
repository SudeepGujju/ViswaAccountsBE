(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{E5bV:function(t,e,a){"use strict";a.r(e),a.d(e,"GstModule",function(){return N});var o=a("ofXK"),n=a("tyNb"),i=a("auXs"),c=a("M9IT"),l=a("Dh3D"),r=a("+0xr"),s=a("eIep"),b=a("fXoL"),m=a("o0su"),f=a("kmnG"),p=a("d3UM"),u=a("bTqV"),d=a("FKr1"),h=a("qFsG"),w=a("Qu3c"),y=a("NFeN");function g(t,e){if(1&t&&(b.Rb(0,"mat-option",10),b.yc(1),b.Qb()),2&t){const t=e.$implicit;b.ic("value",t),b.Ab(1),b.Ac(" ",t," ")}}function D(t,e){if(1&t){const t=b.Sb();b.Rb(0,"mat-form-field",2),b.Rb(1,"mat-label"),b.yc(2,"Filter Records"),b.Qb(),b.Rb(3,"input",11),b.Yb("keyup",function(e){return b.oc(t),b.cc().applyFilter(e.target.value)}),b.Qb(),b.Qb()}}function R(t,e){if(1&t){const t=b.Sb();b.Rb(0,"div"),b.Rb(1,"button",12),b.Yb("click",function(){return b.oc(t),b.cc().exportData()}),b.Rb(2,"mat-icon"),b.yc(3,"save_alt"),b.Qb(),b.Qb(),b.Qb()}}function S(t,e){if(1&t&&(b.Rb(0,"th",25),b.yc(1),b.Qb()),2&t){const t=b.cc().$implicit;b.Ab(1),b.Ac(" ",t.header," ")}}function v(t,e){if(1&t&&(b.Rb(0,"td",26),b.yc(1),b.Qb()),2&t){const t=e.$implicit,a=b.cc().$implicit;b.tc("text-align",a.align),b.Ab(1),b.zc(a.cell(t))}}function F(t,e){1&t&&(b.Pb(0,22),b.wc(1,S,2,1,"th",23),b.wc(2,v,2,3,"td",24),b.Ob()),2&t&&b.ic("matColumnDef",e.$implicit.columnDef)}function T(t,e){if(1&t&&(b.Rb(0,"td",27),b.yc(1," No Data Available "),b.Qb()),2&t){const t=b.cc(2);b.Bb("colspan",t.columnsToDisplay.length)}}function x(t,e){1&t&&b.Mb(0,"tr",28)}function O(t,e){1&t&&b.Mb(0,"tr",29)}function Q(t,e){if(1&t&&b.Mb(0,"tr",30),2&t){const t=b.cc(2);b.ic("hidden",!(0===t.tableDS.filteredData.length))}}const A=function(){return["noData"]},C=function(){return[5,10,15,20]};function k(t,e){if(1&t&&(b.Rb(0,"div",13),b.Rb(1,"table",14),b.wc(2,F,3,1,"ng-container",15),b.Pb(3,16),b.wc(4,T,2,1,"td",17),b.Ob(),b.wc(5,x,1,0,"tr",18),b.wc(6,O,1,0,"tr",19),b.wc(7,Q,1,1,"tr",20),b.Qb(),b.Mb(8,"mat-paginator",21),b.Qb()),2&t){const t=b.cc();b.Ab(1),b.ic("dataSource",t.tableDS),b.Ab(1),b.ic("ngForOf",t.columns),b.Ab(3),b.ic("matHeaderRowDef",t.columnsToDisplay)("matHeaderRowDefSticky",!0),b.Ab(1),b.ic("matRowDefColumns",t.columnsToDisplay),b.Ab(1),b.ic("matFooterRowDef",b.jc(7,A)),b.Ab(1),b.ic("pageSizeOptions",b.jc(8,C))}}const I=[{path:"",canActivate:[i.a],component:(()=>{class t{constructor(t,e,a){this.rcrdSrvc=t,this.route=e,this.exportSrvc=a,this.filesList=[],this.tableDS=null,this.columnsToDisplay=[],this.columns=[],this.displayTable=!1}set matPaginator(t){t&&(this.tableDS.paginator=t)}set matSort(t){t&&(this.tableDS.sort=t)}ngOnInit(){this.route.queryParamMap.pipe(Object(s.a)(t=>(this.reportType=t.get("reportType"),this.filesList=[],this.destroyTable(),this.rcrdSrvc.getFilesList()))).subscribe(t=>{this.filesList=t},t=>{console.log(t)})}loadFile(t){if(!t)return alert("Please select file name"),!1;this.destroyTable(),this.rcrdSrvc.getFileData(t,this.reportType).subscribe(t=>{this.generateTable(t)},t=>{console.log(t)})}generateTable(t){const e=["BillCount"];if(t.length>0){const a=[];Object.keys(t[0]).forEach((t,o)=>{a.push({columnDef:t,header:t.toUpperCase(),cell:a=>e.indexOf(t)>=0||isNaN(a[t])?""+a[t]:parseFloat(a[t]).toFixed(2),align:"left"})}),this.columns=a,this.columnsToDisplay=a.map(t=>t.columnDef),this.tableDS=new r.o(t),this.displayTable=!0}}applyFilter(t){this.tableDS.filter=t}destroyTable(){this.displayTable=!1,this.tableDS=null}exportData(){const t=this.reportType+"_"+Date.now();this.exportSrvc.exportAsExcelFile(this.tableDS.filteredData,t)}}return t.\u0275fac=function(e){return new(e||t)(b.Lb(m.i),b.Lb(n.a),b.Lb(m.d))},t.\u0275cmp=b.Fb({type:t,selectors:[["gst-reports"]],viewQuery:function(t,e){if(1&t&&(b.Dc(c.a,!0),b.Dc(l.a,!0)),2&t){let t;b.lc(t=b.Zb())&&(e.matPaginator=t.first),b.lc(t=b.Zb())&&(e.matSort=t.first)}},decls:15,vars:5,consts:[[1,"flex-space","align-left"],[1,"space-2","mat-title"],[1,"space-2","mr-05"],["fileControl",""],[3,"value",4,"ngFor","ngForOf"],[1,"space-1","mr-1"],["type","button","mat-raised-button","","color","primary",3,"click"],["class","space-2 mr-05",4,"ngIf"],[4,"ngIf"],["class","container mat-elevation-z8",4,"ngIf"],[3,"value"],["matInput","","type","text",3,"keyup"],["type","button","mat-mini-fab","","color","primary","matTooltip","Download List",3,"click"],[1,"container","mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","noData"],["mat-footer-cell","",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","","style","text-align: center;",3,"hidden",4,"matFooterRowDef"],["pageSize","10","showFirstLastButtons","",3,"pageSizeOptions"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",3,"text-align",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-footer-cell",""],["mat-header-row",""],["mat-row",""],["mat-footer-row","",2,"text-align","center",3,"hidden"]],template:function(t,e){if(1&t){const t=b.Sb();b.Rb(0,"div",0),b.Rb(1,"div",1),b.yc(2),b.Qb(),b.Rb(3,"mat-form-field",2),b.Rb(4,"mat-label"),b.yc(5,"File"),b.Qb(),b.Rb(6,"mat-select",null,3),b.wc(8,g,2,2,"mat-option",4),b.Qb(),b.Qb(),b.Rb(9,"div",5),b.Rb(10,"button",6),b.Yb("click",function(){b.oc(t);const a=b.mc(7);return e.loadFile(a.value)}),b.yc(11,"Load File"),b.Qb(),b.Qb(),b.wc(12,D,4,0,"mat-form-field",7),b.wc(13,R,4,0,"div",8),b.Qb(),b.wc(14,k,9,9,"div",9)}2&t&&(b.Ab(2),b.Ac(" ",e.reportType," Report "),b.Ab(6),b.ic("ngForOf",e.filesList),b.Ab(4),b.ic("ngIf",e.displayTable),b.Ab(1),b.ic("ngIf",e.displayTable),b.Ab(1),b.ic("ngIf",e.displayTable))},directives:[f.c,f.g,p.a,o.k,u.a,o.l,d.i,h.a,w.a,y.a,r.n,l.a,r.c,r.e,r.k,r.m,r.g,c.a,r.i,r.b,r.h,l.b,r.a,r.d,r.j,r.l,r.f],styles:[".mat-header-cell[_ngcontent-%COMP%]{text-align:center}.mat-column-GSTIN[_ngcontent-%COMP%], .mat-column-SUPPLIER[_ngcontent-%COMP%]{flex:0 0 140px!important;width:140px!important}.mat-column-GSTIN[_ngcontent-%COMP%], .mat-column-INVNO[_ngcontent-%COMP%], .mat-column-SUPPLIER[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;overflow-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.mat-column-INVNO[_ngcontent-%COMP%]{flex:0 0 110px!important;width:110px!important}"]}),t})()}];let P=(()=>{class t{}return t.\u0275mod=b.Jb({type:t}),t.\u0275inj=b.Ib({factory:function(e){return new(e||t)},imports:[[n.d.forChild(I)],n.d]}),t})();var M=a("1+r1"),L=a("3Pt+");let N=(()=>{class t{}return t.\u0275mod=b.Jb({type:t}),t.\u0275inj=b.Ib({factory:function(e){return new(e||t)},imports:[[o.c,L.u,M.a,P]]}),t})()}}]);