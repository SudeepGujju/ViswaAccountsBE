(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{GbFJ:function(t,e,i){"use strict";i.r(e),i.d(e,"UploadModule",function(){return E});var n=i("ofXK"),o=i("3Pt+"),s=i("1+r1"),l=i("tyNb"),a=i("0IaG"),r=i("U7T7"),c=i("fXoL"),u=i("tk/3");let b=(()=>{class t{constructor(t){this.http=t}upload(t,e){const i=new FormData;return i.append("file",t,t.name),this.http.post(e,i)}}return t.\u0275fac=function(e){return new(e||t)(c.Vb(u.b))},t.\u0275prov=c.Hb({token:t,factory:t.\u0275fac}),t})();var d=i("WNGt"),p=i("bTqV"),f=i("NFeN"),m=i("f0Cb"),h=i("MutI");const g=["fileElement"];function y(t,e){if(1&t&&(c.Rb(0,"div"),c.Rb(1,"span",15),c.yc(2,"FileName: "),c.Qb(),c.yc(3),c.Qb()),2&t){const t=c.cc();c.Ab(3),c.zc(t.file.name)}}function v(t,e){1&t&&c.yc(0,"No File Selected")}function w(t,e){if(1&t&&(c.Rb(0,"mat-list-item",19),c.yc(1),c.Qb()),2&t){const t=e.$implicit;c.Ab(1),c.Bc("",t.id," - ",t.errMsg,"")}}function Q(t,e){if(1&t&&(c.Rb(0,"div"),c.Mb(1,"mat-divider"),c.Rb(2,"div",16),c.yc(3),c.Qb(),c.Rb(4,"mat-list",17),c.wc(5,w,2,2,"mat-list-item",18),c.Qb(),c.Qb()),2&t){const t=c.cc();c.Ab(3),c.Cc("Total: ",t.resp.totalCount,". Success: ",t.resp.successCount,". Failed: ",t.resp.failedCount,"."),c.Ab(2),c.ic("ngForOf",t.resp.failedRecs)}}let R=(()=>{class t{constructor(t,e,i){this.data=t,this.uploadSrvc=e,this.alrtSrvc=i,this.uploadConfig=null,this.file=null,this.inProgress=!1,this.resp=null}ngOnInit(){this.uploadConfig=Object(r.c)(this.data.ModuleType)}onFileSelect(){this.resp=null,this.file=this.fileElement.nativeElement.files.length>0?this.fileElement.nativeElement.files[0]:null}addFiles(){this.fileElement.nativeElement.click()}uploadFile(){this.uploadConfig.confirmation?this.alrtSrvc.showConfirmAlert(this.uploadConfig.confirmationMessage).afterClosed().subscribe(t=>{t&&this.upload()}):this.upload()}upload(){if(this.inProgress)return!1;this.inProgress=!0,this.resp=null,this.uploadSrvc.upload(this.file,this.uploadConfig.url).subscribe(t=>{this.inProgress=!1,0===t.status||1===t.status?this.alrtSrvc.showSuccessAlert(t.message):this.alrtSrvc.showErrorAlert(t.message),delete t.status,delete t.message,this.resp=t},t=>{this.inProgress=!1,this.alrtSrvc.showErrorAlert(t)})}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(a.a),c.Lb(b),c.Lb(d.b))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-upload-dialog"]],viewQuery:function(t,e){if(1&t&&c.Dc(g,!0),2&t){let t;c.lc(t=c.Zb())&&(e.fileElement=t.first)}},decls:26,vars:5,consts:[["type","file","accept",".csv",2,"display","none",3,"change"],["fileElement",""],["mat-dialog-title","",1,"flex-title"],["mat-dialog-close",""],["type","button","mat-icon-button","","isIconButton","true","aria-label","close dialog","tabindex","-1"],["mat-dialog-content",""],[1,"flex-space"],[4,"ngIf","ngIfElse"],["noFile",""],["mat-raised-button","","color","primary",3,"click"],[4,"ngIf"],["mat-dialog-actions","",1,"align-right"],["type","button","mat-raised-button","","color","primary",3,"disabled","click"],[1,"rotate-180"],["type","button","mat-raised-button","","mat-dialog-close","","color","primary"],[1,"mat-title"],[2,"padding","5px 0px"],["role","list",1,"no-padding-list",2,"max-height","250px","overflow-y","auto"],["style","padding: 0;","role","list-item",4,"ngFor","ngForOf"],["role","list-item",2,"padding","0"]],template:function(t,e){if(1&t&&(c.Rb(0,"input",0,1),c.Yb("change",function(){return e.onFileSelect()}),c.Qb(),c.Rb(2,"div",2),c.Rb(3,"div"),c.yc(4),c.Qb(),c.Rb(5,"div",3),c.Rb(6,"button",4),c.Rb(7,"mat-icon"),c.yc(8,"close"),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(9,"div",5),c.Rb(10,"div",6),c.wc(11,y,4,1,"div",7),c.wc(12,v,1,0,"ng-template",null,8,c.xc),c.Rb(14,"button",9),c.Yb("click",function(){return e.addFiles()}),c.Rb(15,"mat-icon"),c.yc(16,"add"),c.Qb(),c.yc(17,"Add Files "),c.Qb(),c.Qb(),c.wc(18,Q,6,4,"div",10),c.Qb(),c.Rb(19,"div",11),c.Rb(20,"button",12),c.Yb("click",function(){return e.uploadFile()}),c.yc(21,"Upload"),c.Rb(22,"mat-icon",13),c.yc(23,"save_alt"),c.Qb(),c.Qb(),c.Rb(24,"button",14),c.yc(25,"Close"),c.Qb(),c.Qb()),2&t){const t=c.mc(13);c.Ab(4),c.Ac("",e.uploadConfig.title," - Upload"),c.Ab(7),c.ic("ngIf",e.file)("ngIfElse",t),c.Ab(7),c.ic("ngIf",e.resp),c.Ab(2),c.ic("disabled",!e.file||e.inProgress)}},directives:[a.h,a.d,p.a,f.a,a.e,n.l,a.c,m.a,h.a,n.k,h.c],styles:[""]}),t})();const F=[{path:"**",component:(()=>{class t{constructor(t,e,i){this.dialog=t,this.route=e,this.router=i}ngOnInit(){this.route.queryParamMap.subscribe(t=>{this.openDialog(+t.get("ModuleType"))})}openDialog(t){this.dialog.open(R,{minHeight:"150px",minWidth:"500px",restoreFocus:!1,disableClose:!0,role:"dialog",hasBackdrop:!0,data:{ModuleType:t}}).afterClosed().subscribe(t=>{this.router.navigate([{outlets:{dialog:null}}])})}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(a.b),c.Lb(l.a),c.Lb(l.b))},t.\u0275cmp=c.Fb({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})()}];let C=(()=>{class t{}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},imports:[[l.d.forChild(F)],l.d]}),t})();var A=i("W/PH");let E=(()=>{class t{}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},providers:[b],imports:[[n.c,o.u,C,s.a,A.a]]}),t})()}}]);